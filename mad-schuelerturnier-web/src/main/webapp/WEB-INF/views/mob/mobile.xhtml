<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pm="http://primefaces.org/mobile">

<f:view renderKitId="PRIMEFACES_MOBILE" />

<h:head>

</h:head>

<h:body>

    <pm:page id="main">
        <pm:header title="Spielplan" theme="b">
            <p:button styleClass="ui-btn-right ui-btn-inline" value="Mannschaft auswählen" icon="ui-icon-arrow-r" outcome="pm:settings" />
        </pm:header>

        <pm:content>

            <h:form id="mainForm">

                <p:outputPanel id="display" style="text-align:center">


                    <p:dataList var="spiel" value="#{mobileController.getSpiele()}">
                        <p:commandLink value="#{spiel.start} #{spiel.mannschaftA.name} #{spiel.mannschaftB.name}" action="pm:group?transition=slide">

                        </p:commandLink>
                    </p:dataList>

                </p:outputPanel>


                <p:poll interval="8"
                        listener="#{mobileController.mannschaft}" update="display" />


            </h:form>

        </pm:content>
    </pm:page>

    <pm:page id="settings">
        <pm:header title="Mannschaft auswählen" theme="b">
            <p:button styleClass="ui-btn-right ui-btn-inline" value="Anzeigen" icon="ui-icon-arrow-r" outcome="pm:main" />
        </pm:header>

        <pm:content>

            <h:form id="settingsForm">
                <pm:field>
                    <p:selectOneMenu id="city" value="#{mobileController.mannschaft}" >
                        <f:selectItems value="#{mobileController.mannschaften}" />

                        <p:ajax update="settingsForm" event="change"
                                actionListener="#{mobileController.mannschaft}"/>

                    </p:selectOneMenu>
                </pm:field>


            </h:form>

        </pm:content>
    </pm:page>
</h:body>

</html>