<?xml version="1.0" encoding="utf-8" standalone="no"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:sec="http://www.springframework.org/security/tags"
                template="../../../layouts/100.xhtml">


<ui:define name="main">
<div id="main">
<div class="page_margins">
<div class="page">
<div class="inset">
<h:form id="form1">

<p:fieldset legend="Status">
    <p:commandButton id="masteroff" value="Setze diesen Node als Master" action="setmaster" ajax="false" rendered="#{!integrationControllerImpl.isMaster()}" />
    <p:commandButton id="masteron" value="Dieser Node ist der Master" action="setmaster" disabled="true" ajax="false" rendered="#{integrationControllerImpl.isMaster()}" />
</p:fieldset>


<p:commandButton  id="refresh"  widgetWar="refresh" value="Refresh" ajax="false" style="display: none" />

<br/>
<p:tabView orientation="top" id="tabview">

<p:tab title="Messaging">
    <h:panelGrid columns="2" cellpadding="0">


        <h:panelGrid columns="2" style="margin-bottom:10px">



            <h:outputLabel for="outbound" value="Messages raus (Applikation->Transportschicht):" />
            <h:outputText id ="outbound" value="#{integrationControllerImpl.countOutboundMessages()}"/>

            <h:outputLabel for="inbound" value="Messages rein (Transportschicht->Applikation):" />
            <h:outputText id ="inbound" value="#{integrationControllerImpl.countInboundMessages()}"/>

            <h:outputLabel for="stored" value="Gespeicherte Nachrichten in der Transportschicht:" />
            <h:outputText id ="stored" value="#{integrationControllerImpl.countStoredObjects()}"/>

            <h:outputLabel for="own" value="Eigene Adresse:" />
            <h:outputText id= "own" value="#{integrationControllerImpl.getOwnAddress()}"/>



            <h:outputLabel value="Remote Nodes:" />


            <ui:repeat value="#{integrationControllerImpl.getAllReceivers()}" var="rec">
<br/>

                <h:outputText value="#{rec.remoteConnectionString} - online:#{rec.isOnline()} - messagequeu: #{rec.countMessagesToSend()}"/>
            </ui:repeat>

        </h:panelGrid>

    </h:panelGrid>
</p:tab>

<p:tab id="schirizettel" title="Schirizettel">


        <h:panelGrid id="panel" columns="2" style="margin-bottom:10px">

            <h:outputText value="Schrizettelscanner im Demo Modus laufen lassen"/>
            <p:selectBooleanCheckbox onchange="document.getElementById('form1:refresh').click()"
                    id="webcamdemomode" value="#{spieleinstellungen.webcamdemomode}"
                    ajax="true" >
            </p:selectBooleanCheckbox>

    </h:panelGrid>
</p:tab>

<p:tab id="websitepublisher" title="Websitepublisher">
    <h:panelGrid  columns="2" style="margin-bottom:10px">


        <h:outputText value="Kategorien-, Spiele- und Mannschaftsnummernanzeigen verbergen: "/>
        <p:selectBooleanCheckbox
                                 id="websiteInMannschaftslistenmode" value="#{spieleinstellungen.websiteInMannschaftslistenmode}"
                                 ajax="true" />

        <p:separator /> <p:separator />

        <h:outputText value="Link Anmeldung downloaden anzeigen " />
        <p:selectBooleanCheckbox
                                  value="#{spieleinstellungen.websiteEnableDownloadLink}"
                                 ajax="true"/>

        <h:outputText value="AnmeldeLink: "/>
        <p:inputText value="#{spieleinstellungen.websiteDownloadLink}"  size="40"/>


        <p:separator /><p:separator />


        <h:outputText value="Website Turnier Titel: "/>
        <p:inputText value="#{spieleinstellungen.websiteTurnierTitel}"  size="40"/>



    </h:panelGrid>
</p:tab>

<p:tab id="Spielplanung" title="Spielplanung">
    <h:panelGrid id="panel2" columns="2" style="margin-bottom:10px">
        <h:outputText value="Bis- und mit Klassen haben 2 Pausen:"/>
        <h:panelGrid columns="1" style="margin-bottom:10px">
            <p:inputText id="txt1" value="#{business.spielEinstellungen.zweiPausenBisKlasse}" onchange="document.getElementById('form1:refresh').click()" disabled="#{!spielstatusWebBean.anmeldephase and !spielstatusWebBean.kategoriezuordnungsphase}"/>
            <p:slider for="txt1" minValue="0" maxValue = "9" disabled="#{!spielstatusWebBean.anmeldephase and !spielstatusWebBean.kategoriezuordnungsphase}"/>
        </h:panelGrid>

        <h:outputText value="Kategorien mit 2 Klassen haben 2 separate grosse Finale"/>
        <h:panelGrid columns="1" style="margin-bottom:10px">
            <p:selectBooleanCheckbox onchange="document.getElementById('form1:refresh').click()"
                                     id="txt2" value="#{business.spielEinstellungen.behandleFinaleProKlassebeiZusammengefuehrten}"
                                     ajax="true" update="form1" disabled="#{!spielstatusWebBean.anmeldephase and !spielstatusWebBean.kategoriezuordnungsphase}"/>

        </h:panelGrid>

    </h:panelGrid>
</p:tab>

<p:tab title="Alles andere">
<h:panelGrid columns="2" cellpadding="10">

<h:inputHidden id="txt3" value="#{spieleinstellungen.aufholzeitInSekunden}"/>
<p:fieldset legend="Spielsteuerung">
<p:messages/>

<p:separator id="customSeparator3"/>
<h:outputText value="Eigene Adresse: #{loginPrepareAction.getIp()}"/>
<p:separator id="customSeparator33"/>

<h:panelGrid columns="2" id="grid01" style="margin-bottom:10px" cellpadding="5">

    <h:outputText value="Spielabbruch durch Speaker erlauben"/>
    <p:selectBooleanCheckbox
            id="abbrechenZulassen" value="#{spieleinstellungen.abbrechenZulassen}"
            ajax="true">
    </p:selectBooleanCheckbox>

    <h:outputText value="Gong bei Spielende abspielen"/>
    <p:selectBooleanCheckbox
            id="gongEinschalten" value="#{spieleinstellungen.gongEinschalten}"
            ajax="true">
    </p:selectBooleanCheckbox>

    <h:outputText value="Automatisch Plätze ansagen"/>
    <p:selectBooleanCheckbox
            id="automatischesAnsagen" value="#{spieleinstellungen.automatischesAnsagen}"
            ajax="true">
    </p:selectBooleanCheckbox>

    <h:outputText value="Automatisch in den Vorbereitet Status wechseln"/>

    <p:selectBooleanCheckbox
            id="automatischesVorbereiten"
            value="#{spieleinstellungen.automatischesVorbereiten}"
            ajax="true">
    </p:selectBooleanCheckbox>

    <h:outputText id="output3"
                  value="Anzahl wartende Spiele beim Speaker: #{spielDurchfuehrung.wartendSize}"/>

    <p:slider for="wartendSize" display="output3"
              displayTemplate="Anzahl wartende Spiele beim Speaker: {value}" ajax="true"
              minValue="1" maxValue="10" style="width:200px"/>

    <h:outputText id="output4"
                  value="Minuten fuer Vorbereitungsansage: #{spielDurchfuehrung.minutenZumVorbereiten} "/>

    <p:slider for="minutenZumVorbereiten" display="output4"
              displayTemplate="Minuten fuer Vorbereitungsansage: {value}" ajax="true"
              minValue="1" maxValue="10" style="width:200px"/>

    <h:outputText id="is1Active"
                  value="Wartende Spiele ausblenden"/>
    <p:selectBooleanCheckbox
            id="is1Activec"
            value="#{speakerTabModel.is1Active}"
            ajax="true">
    </p:selectBooleanCheckbox>

    <h:outputText id="is2Active" value="Zum Vorbereiten ausblenden"/>
    <p:selectBooleanCheckbox
            id="is2Activec"
            value="#{speakerTabModel.is2Active}"
            ajax="true">
    </p:selectBooleanCheckbox>

    <h:outputText id="is3Active" value="Wartet auf Start ausblenden"/>
    <p:selectBooleanCheckbox
            id="is3Activec"
            value="#{speakerTabModel.is3Active}"
            ajax="true">
    </p:selectBooleanCheckbox>

    <h:outputText id="is4Active"
                  value="Am Spielen ausblenden"/>
    <p:selectBooleanCheckbox
            id="is4Activec"
            value="#{speakerTabModel.is4Active}"
            ajax="true">
    </p:selectBooleanCheckbox>

    <h:outputText id="is5Active"
                  value="Beendet ausblenden"/>
    <p:selectBooleanCheckbox
            id="is5Activec"
            value="#{speakerTabModel.is5Active}"
            ajax="true">
    </p:selectBooleanCheckbox>


</h:panelGrid>

<h:inputHidden id="wartendSize" value="#{spielDurchfuehrung.wartendSize}"/>
<h:inputHidden id="minutenZumVorbereiten"
               value="#{spielDurchfuehrung.minutenZumVorbereiten}"/>


<br/>

<p:separator id="customSeparator4"/>

<h:outputText id="zeit2" value="Echte Zeit #{spielUhr.richtigeZeit}"/>
-
<h:outputText id="zeit3" value="Spiel Zeit: #{spielUhr.spielZeit}"/>
-
<h:outputText id="versp" value="Verspätung: #{business.spielzeitVerspaetung()}"/>
<p:poll interval="1" listener="#{spielUhr.getRichtigeZeit}"
        update="zeit2,zeit3, versp"/>
<p:separator id="customSeparator25"/>


Phase: #{spieleinstellungen.phase}


<br/>
<p:separator id="customSeparator15"/>
<h:outputText id="queue" value="Jobs in der Hintergrundverarbeitung: #{resultateVerarbeiter.getQueueSize()}"/>
<p:poll interval="1" listener="#{resultateVerarbeiter.getQueueSize()}"
        update="queue"/>

<br/>
<p:separator id="customSeparator05"/>
<br/>
<h:panelGrid columns="2" id="inputelements"
             style="margin-bottom:10px" cellpadding="5">

    <h:outputText value="Automatisch Zeit aufholen"/>
    <p:selectBooleanCheckbox id="autoaufholen"
                             value="#{spieleinstellungen.automatischesAufholen}"
                             ajax="true">
    </p:selectBooleanCheckbox>


    <h:outputText id="output2"
                  value="Aufholzeit in Sekunden: #{spieleinstellungen.aufholzeitInSekunden}"/>

    <p:slider for="txt2" display="output2"
              displayTemplate="Aufholzeit in Sekunden: {value}" minValue="1"
              maxValue="180"/>

    <h:outputText value="Mit aktueller Zeit starten"/>

    <p:selectBooleanCheckbox
            id="aktuellezeit" value="#{spieleinstellungen.startJetzt}" update="start"
            ajax="true" disabled="#{sec:areNotGranted('ROLE_ROOT')}">
        <p:ajax update="start,output"/>
    </p:selectBooleanCheckbox>

    <h:outputText value="Zeit einstellen"/>

    <p:calendar id="start" value="#{spieleinstellungen.start}"
                pattern="dd.MM.yyyy H:mm:ss"
                disabled="#{spieleinstellungen.startJetzt}">
    </p:calendar>

    <h:outputText value="Zeitverschnellerungsfaktor für Testläufe"/>

    <p:selectOneMenu id="output" value="#{spieleinstellungen.verschnellerungsFaktor}"
                     disabled="#{spieleinstellungen.startJetzt}">
        <f:selectItem itemLabel="1" itemValue="1"/>
        <f:selectItem itemLabel="2" itemValue="2"/>
        <f:selectItem itemLabel="3" itemValue="3"/>
        <f:selectItem itemLabel="4" itemValue="4"/>
        <f:selectItem itemLabel="5" itemValue="5"/>
        <f:selectItem itemLabel="10" itemValue="10"/>
        <f:selectItem itemLabel="15" itemValue="15"/>
    </p:selectOneMenu>

    <p:commandButton id="start_zeit" value="Start" action="start"
                     disabled="#{sec:areNotGranted('ROLE_ROOT') or zeitgeber.isClockStarted()}"/>
    <p:commandButton id="stop_zeit" value="Stop" action="stop"
                     disabled="#{sec:areNotGranted('ROLE_ROOT') or !zeitgeber.isClockStarted()}"/>

</h:panelGrid>
<p:separator id="customSeparator"/>

<br/><br/>
<p:separator id="customSeparator2"/>

<p:commandButton action="#{business.spielzeitEinholen(60)}" value="60 Sekunden aufholen"
                 ajax="false"/>
<br/><br/>
<p:separator id="customSeparator23"/>

<p:commandButton action="#{printAgent.printTestpage()}" value="Testseite drucken"
                 ajax="true"/>

<p:commandButton action="#{spielPrintManager.printPage()}"
                 value="Restliche Resultate der Rangliste drucken" ajax="true"/>


<p:commandButton action="#{printAgent.printSchiriAnleitung()}" value="Schirianleitung Drucken"
                 ajax="true"/>

<h:outputText value=" Druckdienst: "/>

<p:selectBooleanCheckbox
        id="print2" value="#{printAgent.running}"
        ajax="true">
</p:selectBooleanCheckbox>
<br/><br/>
<p:separator id="customSeparator234"/>


<p:separator id="customSeparatordd"/>


<br/>

</p:fieldset>



</h:panelGrid>
</p:tab>

</p:tabView>



</h:form>

</div>
<br/>
</div>
</div>
</div>
</ui:define>

</ui:composition>
